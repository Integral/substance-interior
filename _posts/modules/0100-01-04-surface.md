---
layout: module
title: Surface
abstract: A building block for web-based text editors.
author_twitter: _mql
author: Michael Aufreiter
links: # specify links for demo and source
  source: http://github.com/substance/surface
prose_link:
  http://prose.io/#substance/substance.github.com/edit/master/_posts/modules/0100-01-04-surface.md
version: not yet released
progress: 1
contributors:
- name: Victor Saiz
  user: vectorsize
  avatar: https://secure.gravatar.com/avatar/4f4b3e53c3cf88845ee48fc50ccf3593?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png
- name: Eugen Tudorancea
  user: navaru
  avatar: https://secure.gravatar.com/avatar/56bc79125f691c951f7036911f2c24d8?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png
- name: Tim Baumann
  user: timjb
  avatar: https://secure.gravatar.com/avatar/d6eea5713cdf2f25ebf001263fbaa9f4?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png
- name: Michael Aufreiter
  user: michael
  avatar: https://secure.gravatar.com/avatar/d5a959d7e57daa5433fcb9f8da40be4b?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png

categories:
- modules
published: false
---

Surface is intended to be an extensible low-level interface for semantic rich text editing. It doesn't introduce any UI components, but an API for managing user-defined text annotations.

# Try it out!

You can try the current version and see how it feels like beneath.

<iframe width="800" height="400" frameborder="0" scrolling="no" src="http://interior.substance.io/surface/">
</iframe>

# Usage

## Create a new Surface

    window.surface = new Substance.Surface({
      el: $('.content')[0],
      content: $('script[name=content]').text(),
      types: {
        "em": { "inclusive": true },
        "str": { "inclusive": true },
        "idea": { "inclusive": false },
        "question": { "inclusive": false },
        "error": { "inclusive": false }
      }
    });
        
The types are optional, they denote which annotations the Surface supports. Annotations are created using the corresponding API calls.

## Text manipulation

### Insert text

Usage: `surface.insertText(text, index)

You can insert text programatically by calling `insertText` and passing in a `text` string as well as an `index` specifying the position where text will be inserted.

## Selections

### Get current selection

Usage: `surface.selection()`

As a return value, you'll get an array holding start position and offset (e.g. `[4, 5]` when the selection starts at character 4 and includes 5 characters).

### Set selection programmatically

Usage: `surface.select(start, end)`

Instead of selecting text by mouse or keyboard navigation, you can do it programatically by calling `select` and passing in `start` and `end` position of the selected characters.

## Annotations

### Get Annotations

Usage: `surface.annotations`

You can access currently registered annotations by examining the publicly exposed `surface.annotations` object.

The annotations object looks like this:

	{
      "annotation-1" : { id: "annotation-1", type: "idea", pos: [0,9] },
      "annotation-1" : { id: "annotation-2", type: "em", pos: [57,10] }
    }


### Insert annotation

Registering a new annotation is easy.




    this.selection = selection;
    this.annotations = annotations;
    this.getContent = getContent;
    this.deleteRange = deleteRange;
    this.insertCharacter = insertCharacter;
    this.insertText = insertText;
    this.insertAnnotation = insertAnnotation;
    this.getAnnotations = getAnnotations;
    this.deleteAnnotation = deleteAnnotation;
    this.highlight = highlight;